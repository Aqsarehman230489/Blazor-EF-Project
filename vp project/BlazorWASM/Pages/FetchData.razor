@page "/fetchdata"
@using BlazorCRUD.library
@using BlazorCRUD.API.Models
@inject HttpClient Http
@inject NavigationManager Nav
@using BlazorWASM.Shared
@inject IJSRuntime JsRuntime

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="css/StyleSheet.css" rel="stylesheet" />

<div class="header-container">
    <div class="welcome-section">
        <h1>Welcome <span class="highlight">Admin</span></h1>
    </div>
    <div class="stats-section">
        <div class="stat-item">
            <span class="stat-value">$82.7k</span>
            <span class="stat-label">Great</span>
        </div>
        <div class="stat-item">
            <span class="stat-value">167k</span>
            <span class="stat-label">Likes</span>
        </div>
        <div class="stat-item">
            <span class="stat-value">10</span>
            <span class="stat-label">Events</span>
        </div>
    </div>
</div>

<br />
<!-- Widgets Section -->
<div class="widgets">
    <div class="widget orange">
        <h3>New Article</h3>
        <p>Mountain Trip</p>
    </div>
    <div class="widget green">
        <h3>+250% Sales Today</h3>
    </div>
    <div class="widget red">
        <h3>5 Messages</h3>
        <p>Support Center</p>
    </div>
    <div class="widget purple">
        <h3>+30 Photos</h3>
        <p>Gallery</p>
    </div>
</div>






<!-- Latest News Section -->
<section class="latest-news">
    <h3>Latest News</h3>
    <div class="news-item">
        <p><strong>Jordan Carter</strong> - The Event was amazing and a great experience!!</p>
        <a href="#" class="btn btn-primary">Read the article</a>
    </div>
</section>

@code {
    private bool isLoggedIn;

    protected override async Task OnInitializedAsync()
    {
        
        var loggedIn = await JsRuntime.InvokeAsync<string>("localStorage.getItem", "loggedIn");
        isLoggedIn = loggedIn == "true"; 

        if (!isLoggedIn)
        {
            
            Nav.NavigateTo("/");
        }
    }
}

